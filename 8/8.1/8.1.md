# 8.1. Sentencias SQL por módulo / prototipo

# Módulo de gestión de inventario
## Nuevo producto
Cod requerimiento:

Pantalla:

![alt text](image.png)

Sentencia SQL:

```sql 
INSERT INTO insumo (cod_categoriainsumo, cod_subcategoria, nombre_insumo, cod_unidad, cod_condiciones, cantidad_total, umbral)
SELECT 
    ci.cod_categoriainsumo,
    s.cod_subcategoria,
    '<3>',
    um.cod_unidad,
    c.cod_condiciones,
    0,  -- Siempre es 0
    20
FROM 
    categoria_insumo ci
JOIN 
    subcategoria s ON s.nombre_subcategoria = '<2>'
JOIN 
    unidad_medidad um ON um.nombre_unidad = '<4>'
JOIN 
    condiciones c ON c.nombre_condiciones = '<5>'
WHERE 
    ci.nombre_categoriainsumo = '<1>';
```

## Revisión cantidad

Ver cantidades solicitadas y recibidas:
```sql
select i.nombre_insumo, um.nombre_unidad as "Unidad de medida", oc2.cantidad_compra as "Cantidad solicitada", oc2.cantidad_llegada as "Cantidad recibida" 
from  orden_comprainsumo oc2
inner join insumo i on oc2.cod_insumo = i.cod_insumo 
inner join unidad_medidad um on um.cod_unidad = i.cod_unidad 
where oc2.cod_ordencompra = '<>'
order by oc2.cantidad_compra desc
```

Agregar cantidad recibida:
```sql
UPDATE orden_comprainsumo oc2
SET cantidad_llegada = <>
FROM insumo i
WHERE oc2.cod_ordencompra = '<>'
AND oc2.cod_insumo = i.cod_insumo
AND i.nombre_insumo = '<>';
```

## Revisión calidad

Ver insumos de la orden de compra
```sql
select nombre_insumo from orden_comprainsumo oc 
inner join insumo i on oc.cod_insumo = i.cod_insumo 
where oc.cod_ordencompra = '<>'
```

Sample content for section 8.1.